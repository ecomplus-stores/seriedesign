var widgetEbit=function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/assets/vendor/",r(r.s=2)}([function(e,t){e.exports=void 0},function(e,t){e.exports=void 0},function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(1),o=r.n(a);t.default=(e={})=>{const{ebitStoreId:t}=e;if(t){const e=window.storefrontApp&&window.storefrontApp.router;if(e){let r=0;const a=({name:e,params:a})=>{"confirmation"===e&&0===r&&(r++,o.a.fetchOrder(a.id).then(e=>{const r=o.a.getCustomer();let a=`storeId=${t}&mktSaleId=0&platform=ecomplus`+`&totalSpent=${e.amount.total}`+`&deliveryTax=${e.amount.freight||0}`+`&transactionId=${e.number||e._id}`+`&email=${r.main_email}`;if(r.gender&&(a+=`&gender=${r.gender.toUpperCase()}`),r.birth_date){const{day:e,month:t,year:n}=r.birth_date;a+=`&birthday=${e.toString().padStart(2,"0")}`+`-${t.toString().padStart(2,"0")}-${n}`}const{items:i}=e;if(i&&i.length){let e=i[0].sku,t=Object(n.price)(i[0]),r=i[0].quantity,o=encodeURIComponent(i[0].name);for(let a=1;a<i.length;a++)e+=`|${i[a].sku}`,t+=`|${Object(n.price)(i[a])}`,r+=`|${i[a].quantity}`,o+=`|${encodeURIComponent(i[a].name)}`;a+=`&sku=${e}&value=${t}&quantity=${r}&productName=${o}`}if(e.shipping_lines&&e.shipping_lines[0]){const t=e.shipping_lines[0];a+=`&deliveryTime=${t.delivery_time.days||0}`+`&zipCode=${t.to.zip}`}if(e.transactions&&e.transactions[0]){const t=e.transactions[0];switch(a+=`&parcels=${t.installments&&t.installments.number||1}`,a+="&paymentType=",t.payment_method.code){case"credit_card":a+="05";break;case"banking_billet":a+="08";break;case"debit_card":case"online_debit":case"account_deposit":a+="28";break;case"loyalty_points":a+="24";break;default:a+="14"}if(t.credit_card&&t.credit_card.company)switch(a+="&cardFlag=",t.credit_card.company.toLowerCase()){case"visa":a+=6;break;case"mastercard":a+=5;break;case"american express":case"amex":a+=1;break;case"elo":a+=8;break;case"aura":a+=2;break;case"hipercard":a+=4;break;case"diners club":a+=3;break;default:a+=7}}const c=setInterval(()=>{const e=document.getElementById("confirmation");if(e){e.insertAdjacentHTML("beforeend",`<div> <param id="ebitParam" value="${a}"> <a id="bannerEbit"></a> </div>`);const r=document.createElement("script");r.id="getSelo",r.type="text/javascript",r.src="https://imgs.ebit.com.br/ebitBR/selo-ebit/js/getSelo.js"+`?${t}&lightbox=true`,document.body.appendChild(r),clearInterval(c)}},200)}).catch(console.error))};e.currentRoute&&a(e.currentRoute),e.afterEach(a)}}else console.error(new Error("Can't show lightbox without `ebitStoreId` option"))}}]).default;
//# sourceMappingURL=widget-ebit.var.min.js.map