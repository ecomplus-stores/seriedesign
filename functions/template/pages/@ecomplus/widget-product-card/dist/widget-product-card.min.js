!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("@ecomplus/utils"),require("vue"),require("lozad"),require("@ecomplus/client"),require("@ecomplus/shopping-cart"),require("@ecomplus/search-engine"),require("@glidejs/glide")):"function"==typeof define&&define.amd?define([,,"lozad",,,,],e):"object"==typeof exports?exports.widgetProductCard=e(require("@ecomplus/utils"),require("vue"),require("lozad"),require("@ecomplus/client"),require("@ecomplus/shopping-cart"),require("@ecomplus/search-engine"),require("@glidejs/glide")):t.widgetProductCard=e(t.ecomUtils,t.Vue,t.lozad,t.ecomClient,t.ecomCart,t.EcomSearch,t.Glide)}(window,(function(t,e,r,i,n,o,s){return function(t){function e(e){for(var r,n,o=e[0],s=e[1],a=0,u=[];a<o.length;a++)n=o[a],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&u.push(i[n][0]),i[n]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r]);for(c&&c(e);u.length;)u.shift()()}var r={},i={0:0};function n(e){if(r[e])return r[e].exports;var i=r[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.e=function(t){var e=[],r=i[t];if(0!==r)if(r)e.push(r[2]);else{var o=new Promise((function(e,n){r=i[t]=[e,n]}));e.push(r[2]=o);var s,a=document.createElement("script");a.charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.src=function(t){return n.p+"widget-product-card."+({}[t]||t)+".min.js"}(t);var c=new Error;s=function(e){a.onerror=a.onload=null,clearTimeout(u);var r=i[t];if(0!==r){if(r){var n=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+n+": "+o+")",c.name="ChunkLoadError",c.type=n,c.request=o,r[1](c)}i[t]=void 0}};var u=setTimeout((function(){s({type:"timeout",target:a})}),12e4);a.onerror=a.onload=s,document.head.appendChild(a)}return Promise.all(e)},n.m=t,n.c=r,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/assets/vendor/",n.oe=function(t){throw console.error(t),t};var o=window.webpackJsonpwidgetProductCard=window.webpackJsonpwidgetProductCard||[],s=o.push.bind(o);o.push=e,o=o.slice();for(var a=0;a<o.length;a++)e(o[a]);var c=s;return n(n.s=22)}([function(e,r){e.exports=t},function(t,e,r){"use strict";function i(t,e,r,i,n,o,s,a){var c,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=r,u._compiled=!0),i&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),s?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},u._ssrRegister=c):n&&(c=a?function(){n.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:n),c)if(u.functional){u._injectStyles=c;var d=u.render;u.render=function(t,e){return c.call(e),d(t,e)}}else{var l=u.beforeCreate;u.beforeCreate=l?[].concat(l,c):[c]}return{exports:t,options:u}}r.d(e,"a",(function(){return i}))},function(t,r){t.exports=e},function(t,e,r){var i=r(17);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,r(8).default)("2bc04915",i,!0,{})},function(t,e,r){var i=r(19);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,r(8).default)("6b88b4e7",i,!0,{})},function(t,e,r){var i=r(21);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,r(8).default)("38288b82",i,!0,{})},function(t,e){t.exports=r},function(t,e,r){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var r=function(t,e){var r=t[1]||"",i=t[3];if(!i)return r;if(e&&"function"==typeof btoa){var n=(s=i,a=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(c," */")),o=i.sources.map((function(t){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(t," */")}));return[r].concat(o).concat([n]).join("\n")}var s,a,c;return[r].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(r,"}"):r})).join("")},e.i=function(t,r,i){"string"==typeof t&&(t=[[null,t,""]]);var n={};if(i)for(var o=0;o<this.length;o++){var s=this[o][0];null!=s&&(n[s]=!0)}for(var a=0;a<t.length;a++){var c=[].concat(t[a]);i&&n[c[0]]||(r&&(c[2]?c[2]="".concat(r," and ").concat(c[2]):c[2]=r),e.push(c))}},e}},function(t,e,r){"use strict";function i(t,e){for(var r=[],i={},n=0;n<e.length;n++){var o=e[n],s=o[0],a={id:t+":"+n,css:o[1],media:o[2],sourceMap:o[3]};i[s]?i[s].parts.push(a):r.push(i[s]={id:s,parts:[a]})}return r}r.r(e),r.d(e,"default",(function(){return f}));var n="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!n)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var o={},s=n&&(document.head||document.getElementsByTagName("head")[0]),a=null,c=0,u=!1,d=function(){},l=null,p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function f(t,e,r,n){u=r,l=n||{};var s=i(t,e);return h(s),function(e){for(var r=[],n=0;n<s.length;n++){var a=s[n];(c=o[a.id]).refs--,r.push(c)}e?h(s=i(t,e)):s=[];for(n=0;n<r.length;n++){var c;if(0===(c=r[n]).refs){for(var u=0;u<c.parts.length;u++)c.parts[u]();delete o[c.id]}}}}function h(t){for(var e=0;e<t.length;e++){var r=t[e],i=o[r.id];if(i){i.refs++;for(var n=0;n<i.parts.length;n++)i.parts[n](r.parts[n]);for(;n<r.parts.length;n++)i.parts.push(m(r.parts[n]));i.parts.length>r.parts.length&&(i.parts.length=r.parts.length)}else{var s=[];for(n=0;n<r.parts.length;n++)s.push(m(r.parts[n]));o[r.id]={id:r.id,refs:1,parts:s}}}}function _(){var t=document.createElement("style");return t.type="text/css",s.appendChild(t),t}function m(t){var e,r,i=document.querySelector('style[data-vue-ssr-id~="'+t.id+'"]');if(i){if(u)return d;i.parentNode.removeChild(i)}if(p){var n=c++;i=a||(a=_()),e=v.bind(null,i,n,!1),r=v.bind(null,i,n,!0)}else i=_(),e=y.bind(null,i),r=function(){i.parentNode.removeChild(i)};return e(t),function(i){if(i){if(i.css===t.css&&i.media===t.media&&i.sourceMap===t.sourceMap)return;e(t=i)}else r()}}var b,g=(b=[],function(t,e){return b[t]=e,b.filter(Boolean).join("\n")});function v(t,e,r,i){var n=r?"":i.css;if(t.styleSheet)t.styleSheet.cssText=g(e,n);else{var o=document.createTextNode(n),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(o,s[e]):t.appendChild(o)}}function y(t,e){var r=e.css,i=e.media,n=e.sourceMap;if(i&&t.setAttribute("media",i),l.ssrId&&t.setAttribute("data-vue-ssr-id",e.id),n&&(r+="\n/*# sourceURL="+n.sources[0]+" */",r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}},function(t,e){t.exports=i},function(t,e){t.exports=n},function(t,e,r){"use strict";var i={name:"ALink",props:{href:String,to:[String,Object]},computed:{isRouter(){return!!this.$router&&(!this.href||Boolean(this.$router.options.routes.find(({path:t})=>t===this.href)))}}},n=r(1),o=Object(n.a)(i,(function(){var t=this.$createElement;return(this._self._c||t)(this.isRouter?"router-link":"a",{tag:"component",attrs:{href:this.isRouter?null:this.href,to:this.isRouter?this.to||this.href:null}},[this._t("default")],2)}),[],!1,null,null,null);e.a=o.exports},function(t,e,r){"use strict";var i=r(0),n=r(6),o=r.n(n);var s={name:"APicture",props:{src:[String,Object],fallbackSrc:String,alt:String,canCalcHeight:{type:Boolean,default:!0},placeholder:{type:String,default:"/assets/img-placeholder.png"},containerBreakpoints:{type:Object,default:()=>({zoom:null,big:800,[i.$ecomConfig.get("default_img_size")||"normal"]:400})},lozadOptions:{type:Object,default:()=>({rootMargin:"350px 0px",threshold:0})}},data:()=>({sources:[],height:null,opacity:null}),computed:{defaultImgObj(){return"object"==typeof this.src&&this.src?Object(i.img)(this.src)||this.src:{}},localFallbackSrc(){const{src:t,defaultImgObj:e,fallbackSrc:r}=this;if(r)return r;const i="object"==typeof t?t.zoom?t.zoom.url:e.url:t;return i?i.replace(/\.webp$/,""):this.placeholder},localAlt(){const{alt:t,src:e,defaultImgObj:r}=this;return t||(e?r.alt||"Product":"No image")}},methods:{updateSources(){const t=[];let e;if("object"==typeof this.src){const{clientWidth:t,clientHeight:r}=this.$el,i=((t,e,r,i)=>{let n,o;for(const s in i){const a=i[s];if(void 0!==a&&t[s]){if(void 0!==o)if(null===a){if(o>=e)continue}else if(a<e||a-50<=r||null!==o&&a>o)continue;n=s,o=a}}return n})(this.src,t,r,this.containerBreakpoints),n=this.src[i],{url:o,size:s}=n||this.defaultImgObj;if(e=o,t&&s&&this.canCalcHeight){const[e,r]=s.split("x").map(t=>parseInt(t,10));r&&(this.height=(t>=e?r:t*r/e)+"px")}}else e=this.src;e&&(e.endsWith(".webp")?t.push({srcset:e,type:"image/webp"},{srcset:/\/imgs\/[0-9]{3}px/.test(e)?e.replace(/\/imgs\/[0-9]{3}px/,""):e.replace(/\.webp$/,""),type:"image/"+(".png"===e.substr(-9,4)?"png":"jpeg")}):t.push({srcset:e})),this.sources=t}},mounted(){this.updateSources(),this.$nextTick(()=>{const t=this.$el;o()(t,{...this.lozadOptions,loaded:t=>{const{localFallbackSrc:e}=this,r="IMG"===t.tagName?t:t.lastChild;r.style.opacity=0,r.onerror=function(){console.error(new Error("Image load error"),this),t.style.display="none";const r=document.createElement("IMG");r.src=e,t.parentNode.insertBefore(r,t.nextSibling)},r.onload=()=>{this.opacity=0,t.classList.add("loaded"),this.$nextTick(()=>{this.opacity=r.style.opacity=null,this.$emit("load")})}}}).observe()})}},a=(r(16),r(1)),c=Object(a.a)(s,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("picture",{staticClass:"picture",style:{height:t.height,opacity:t.opacity},attrs:{"data-iesrc":t.localFallbackSrc,"data-alt":t.localAlt}},[t.sources.length?t._l(t.sources,(function(t,e){var i=t.srcset,n=t.type;return r("source",{key:e,attrs:{srcset:i,type:n}})})):r("source",{attrs:{srcset:t.localFallbackSrc}})],2)}),[],!1,null,null,null);e.a=c.exports},function(t,e,r){"use strict";var i=r(24),n=r(0);const o=(t,e)=>{const{type:r,value:i}=e;if(i)return"percentage"===r?t*(100-i)/100:t-i};var s={name:"APrices",props:{product:{type:Object,required:!0},isLiteral:Boolean,isBig:Boolean,installmentsOption:Object,discountOption:Object,discountText:{type:[String,Boolean],default:""}},data(){return{installmentsNumber:0,monthlyInterest:0,discount:{type:null,value:0},extraDiscount:{type:null,value:0},discountLabel:this.discountText}},computed:{i19asOf:()=>Object(n.i18n)(i.c),i19from:()=>Object(n.i18n)(i.n),i19interestFree:()=>Object(n.i18n)(i.p),i19of:()=>Object(n.i18n)(i.s),i19to:()=>Object(n.i18n)(i.K),i19upTo:()=>Object(n.i18n)(i.O),price(){const t=Object(n.price)(this.product);return this.extraDiscount.value?o(t,this.extraDiscount):t},comparePrice(){return Object(n.onPromotion)(this.product)?this.product.base_price:this.extraDiscount.value?Object(n.price)(this.product):void 0},priceWithDiscount(){return o(this.price,this.discount)},installmentValue(){if(this.installmentsNumber>=2){if(this.monthlyInterest){const t=this.monthlyInterest/100;return this.price*t/(1-Math.pow(1+t,-this.installmentsNumber))}return this.price/this.installmentsNumber}return 0}},methods:{formatMoney:n.formatMoney,updateInstallments(t){if(t){this.monthlyInterest=t.monthly_interest;const e=t.min_installment||5,r=parseInt(this.price/e,10);this.installmentsNumber=Math.min(r,t.max_number)}},updateDiscount(t){t&&(!t.min_amount||t.min_amount<=this.price)&&(this.discount=t,!this.discountText&&!1!==this.discountText&&t.label&&(this.discountLabel="via "+t.label))}},watch:{price:{handler(t){this.$emit("fix-price",t)},immediate:!0}},created(){const t="object"==typeof window&&window.storefront;if(this.discountOption)this.updateDiscount(this.discountOption);else if(t){const e=()=>{const e=t.info&&t.info.apply_discount;if(e){const t=e.available_extra_discount;return t&&(this.extraDiscount=t),Object.keys(e).length>0}return!1};e()||t.on("info:apply_discount",e)}if(this.installmentsOption)this.updateInstallments(this.installmentsOption);else if(t){const e=()=>{const e=t.info&&t.info.list_payments;return!!e&&(this.updateInstallments(e.installments_option),this.updateDiscount(e.discount_option),Object.keys(e).length>0)};e()||t.on("info:list_payments",e)}}},a=(r(18),r(1)),c=Object(a.a)(s,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"prices",class:{"prices--literal":t.isLiteral,"prices--big":t.isBig}},[t.comparePrice?r("span",{staticClass:"prices__compare"},[t.isLiteral?[r("small",[t._v(t._s(t.i19from))]),r("s",[t._v(t._s(t.formatMoney(t.comparePrice)))]),r("small",[t._v(t._s(t.i19to))])]:r("s",[t._v(t._s(t.formatMoney(t.comparePrice)))])],2):t._e(),r("strong",{staticClass:"prices__value"},[t._v(" "+t._s(t.formatMoney(t.price))+" ")]),r("transition-group",{attrs:{"enter-active-class":"animated slideInDown"}},[t.installmentsNumber>1?r("div",{key:"installments",staticClass:"prices__installments"},[t.isLiteral?r("small",[t._v(" "+t._s(t.i19upTo)+" ")]):t._e(),t._v(" "+t._s(t.installmentsNumber)+"x "),t.isLiteral?r("small",[t._v(" "+t._s(t.i19of)+" ")]):t._e(),r("span",[t._v(" "+t._s(t.formatMoney(t.installmentValue))+" ")]),!t.monthlyInterest&&t.isLiteral?r("small",[t._v(" "+t._s(t.i19interestFree)+" ")]):t._e()]):t._e(),"number"==typeof t.priceWithDiscount&&t.priceWithDiscount<t.price?r("div",{key:"discount",staticClass:"prices__discount"},["string"==typeof t.discountLabel&&t.discountLabel?[r("span",[t._v(" "+t._s(t.formatMoney(t.priceWithDiscount))+" ")]),r("small",[t._v(" "+t._s(t.discountLabel)+" ")])]:[r("small",[t._v(" "+t._s(t.i19asOf)+" ")]),r("span",[t._v(" "+t._s(t.formatMoney(t.priceWithDiscount))+" ")])]],2):t._e()])],1)}),[],!1,null,null,null);e.a=c.exports},function(t,e){t.exports=o},,function(t,e,r){"use strict";var i=r(3);r.n(i).a},function(t,e,r){(e=r(7)(!1)).push([t.i,".picture{display:inline-block;width:100%;transition:opacity .2s;overflow:hidden}.picture:not(.loaded){background:linear-gradient(25deg,var(--light) 40%,var(--gray) 200%);opacity:.3;height:100%;min-height:50px}.picture img{max-width:100%;height:auto;margin:0 auto}",""]),t.exports=e},function(t,e,r){"use strict";var i=r(4);r.n(i).a},function(t,e,r){(e=r(7)(!1)).push([t.i,".prices{line-height:var(--line-height-sm)}.prices:not(.prices--big){font-size:var(--font-size-sm)}.prices:not(.prices--big) .prices__installments{font-weight:var(--font-light)}.prices__value{display:block;font-size:var(--font-size-lg)}.prices--big{font-size:var(--font-size)}.prices--big .prices__value{font-size:var(--h1);margin-bottom:var(--spacer-1)}.prices--literal .prices__discount span,.prices--literal .prices__installments span{font-weight:var(--font-bold)}.prices--literal small{font-size:100%;text-transform:lowercase}.prices:not(.prices--literal) .prices__compare{color:var(--gray)}",""]),t.exports=e},function(t,e,r){"use strict";var i=r(5);r.n(i).a},function(t,e,r){(e=r(7)(!1)).push([t.i,".product-card{position:relative;padding:var(--spacer-2);font-size:var(--font-size);border-radius:var(--border-radius)}.product-card__offer-stamp{background-color:var(--success);color:var(--success-yiq);min-width:55px;font-size:80%;line-height:2.2;text-align:center;position:absolute;z-index:9;top:1rem;right:0;border-radius:var(--border-radius);transition:border-radius .3s;opacity:.9}.product-card__offer-stamp i,.product-card__offer-stamp svg{font-size:85%;opacity:.8}.product-card__link{outline:none}.product-card__pictures{position:relative;display:flex;align-items:center;text-align:center;overflow:hidden}.product-card__picture{position:absolute;display:block;flex:0 0 100%}.product-card__picture img{max-width:100%}.product-card__picture:not(:last-child){opacity:0}.product-card__picture:not(:last-child).picture{background-color:none}.product-card__picture.loaded:last-child{transition:opacity .15s ease-out .1s;position:inherit;opacity:1}.product-card__pictures{height:180px}@media (min-width:576px){.product-card__pictures{height:200px}}@media (min-width:992px){.product-card__pictures{height:250px}}.product-card__picture img{max-height:180px}@media (min-width:576px){.product-card__picture img{max-height:200px}}@media (min-width:992px){.product-card__picture img{max-height:250px}}.product-card__name{padding-top:var(--spacer-1);font-size:var(--font-size-sm);line-height:var(--line-height-sm);height:calc(var(--line-height-sm)*var(--font-size-sm)*3);box-sizing:content-box!important;overflow:hidden;font-weight:var(--font-normal);display:block;z-index:1}.product-card__prices .prices__value:first-child{margin-top:calc(var(--line-height)*var(--font-size))}.product-card__buy{margin-top:var(--spacer-1)}@media (hover:hover){.product-card:hover{box-shadow:var(--box-shadow-sm)}.product-card:hover .product-card__offer-stamp{border-top-right-radius:0;border-bottom-right-radius:0}.product-card:hover .product-card__picture.loaded{position:inherit;opacity:1}.product-card:hover .product-card__picture.loaded+.picture{position:absolute;opacity:0;z-index:-1}.product-card:hover .product-card__buy{opacity:1}}.product-card--inactive,.product-card--inactive img{opacity:.7}.product-card--small .product-card__pictures{height:90px}@media (min-width:576px){.product-card--small .product-card__pictures{height:100px}}@media (min-width:992px){.product-card--small .product-card__pictures{height:125px}}.product-card--small .product-card__picture img{max-height:90px}@media (min-width:576px){.product-card--small .product-card__picture img{max-height:100px}}@media (min-width:992px){.product-card--small .product-card__picture img{max-height:125px}}.product-card--small .product-card__name{padding-top:var(--spacer-2);height:auto;white-space:nowrap;text-overflow:ellipsis}.product-card--small .product-card__buy{position:absolute;bottom:var(--spacer-3);right:var(--spacer-3)}",""]),t.exports=e},function(t,e,r){"use strict";r.r(e);var i=r(2),n=r.n(i),o=r(6),s=r.n(o),a=r(14),c=r.n(a),u=r(24),d=r(0),l=r(9),p=r(10),f=r.n(p),h=r(11),_=r(12),m=r(13),b={name:"ProductCard",components:{ALink:h.a,APicture:_.a,APrices:m.a},props:{product:Object,productId:String,isSmall:Boolean,headingTag:{type:String,default:"h3"},buyText:String,transitionClass:{type:String,default:"animated fadeIn"},canAddToCart:{type:Boolean,default:!0},isLoaded:Boolean,installmentsOption:Object,discountOption:Object},data:()=>({body:{},isLoading:!1,isWaitingBuy:!1,isHovered:!1,error:""}),computed:{i19outOfStock:()=>Object(d.i18n)(u.y),i19unavailable:()=>Object(d.i18n)(u.L),buyHtml:()=>"object"==typeof window&&window.productCardBuyHtml,footerHtml:()=>"object"==typeof window&&window.productCardFooterHtml,name(){return Object(d.name)(this.body)},strBuy(){return this.buyText||"object"==typeof window&&window.productCardBuyText||Object(d.i18n)(u.e)},isInStock(){return Object(d.inStock)(this.body)},isActive(){return this.body.available&&this.body.visible&&this.isInStock},discount(){const{body:t}=this;return Object(d.onPromotion)(t)?Math.round(100*(t.base_price-Object(d.price)(t))/t.base_price):0}},methods:{setBody(t){this.body=Object.assign({},t),delete this.body.body_html,delete this.body.body_text,delete this.body.inventory_records,delete this.body.price_change_records},fetchItem(){if(this.productId){this.isLoading=!0;const{storeId:t,productId:e}=this;Object(l.store)({url:`/products/${e}.json`,storeId:t}).then(({data:t})=>{this.$emit("update:product",t),this.setBody(t),this.$emit("update:is-loaded",!0)}).catch(t=>{console.error(t),this.body.name&&this.body.slug&&this.body.pictures||(this.error=Object(d.i18n)(u.h))}).finally(()=>{this.isLoading=!1})}},buy(){const t=this.body;if(this.$emit("buy",{product:t}),this.canAddToCart){const{slug:e,variations:i,customizations:o}=t;i&&i.length||o&&o.length?(this.isWaitingBuy=!0,Promise.all([r.e(2),r.e(1)]).then(r.bind(null,54)).then(t=>{new n.a({render:e=>e(t.default,{props:{productId:this.body._id}})}).$mount(this.$refs.quickview)}).catch(t=>{console.error(t),window.location="/"+e}).finally(()=>{this.isWaitingBuy=!1})):f.a.addProduct(t)}}},created(){this.product&&(this.setBody(this.product),void 0===this.product.available&&(this.body.available=!0),void 0===this.product.visible&&(this.body.visible=!0)),this.isLoaded||this.fetchItem()}},g=(r(20),r(1)),v=Object(g.a)(b,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"product-card",class:{"product-card--inactive":t.body._id&&!t.isActive,"product-card--small":t.isSmall},on:{mouseover:function(e){t.isHovered=!0}}},[r("transition",{attrs:{"enter-active-class":t.transitionClass}},[t.isLoading?t._e():r("section",[t._t("discount-tag",[t.isActive&&t.discount>0?r("span",{staticClass:"product-card__offer-stamp"},[r("i",{staticClass:"fas fa-arrow-down"}),t._v(" "),r("b",[t._v(t._s(t.discount))]),t._v("% ")]):t._e()],null,{discount:t.discount}),t._t("body",[r("a-link",{staticClass:"product-card__link",attrs:{href:"/"+t.body.slug,title:t.name}},[t._t("header"),r("div",{staticClass:"product-card__pictures"},[t.body.pictures&&t.body.pictures.length?t._l(t.body.pictures.slice(0,2).reverse(),(function(e,i){return 1===t.body.pictures.length||1===i||t.isHovered?r("a-picture",{key:i,staticClass:"product-card__picture",attrs:{src:e,"can-calc-height":!1}}):t._e()})):r("a-picture",{staticClass:"product-card__picture"})],2),t._t("title",[r(t.headingTag,{tag:"component",staticClass:"product-card__name"},[t._v(" "+t._s(t.name)+" ")])])],2)]),t._t("rating",[t._m(0)]),t.body.available&&t.body.visible?t.isInStock?[t._t("prices",[r("a-prices",{staticClass:"product-card__prices",attrs:{product:t.body,"installments-option":t.installmentsOption,"discount-option":t.discountOption}})]),r("div",{staticClass:"product-card__buy fade",on:{click:t.buy}},[t._t("buy",[t.buyHtml?r("div",{domProps:{innerHTML:t._s(t.buyHtml)}}):t._e(),r("button",{staticClass:"btn btn-primary",class:t.isSmall?"btn-sm":"btn-block",attrs:{type:"button",disabled:t.isWaitingBuy}},[t._t("buy-button-content",[r("i",{staticClass:"fas fa-shopping-bag mr-1"}),t._v(" "+t._s(t.strBuy)+" ")])],2)])],2),t.isWaitingBuy?r("div",{staticClass:"spinner-grow spinner-grow-sm",attrs:{role:"status"}},[r("span",{staticClass:"sr-only"},[t._v("Loading...")])]):t._e()]:t._t("out-of-stock",[r("p",{staticClass:"badge badge-dark"},[t._v(" "+t._s(t.i19outOfStock)+" ")])]):t._t("unavailable",[r("p",{staticClass:"badge badge-warning"},[t._v(" "+t._s(t.i19unavailable)+" ")])]),t._t("footer",[t.footerHtml?r("div",{domProps:{innerHTML:t._s(t.footerHtml)}}):t._e()])],2)]),t.isLoading?[t._t("default"),t.error?r("div",{staticClass:"alert alert-warning small",attrs:{role:"alert"}},[t._v(" "+t._s(t.error)+" ")]):t._e()]:t._e(),r("div",{ref:"quickview"})],2)}),[function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"product-card__rating",attrs:{"data-sku":this.body.sku}})}],!1,null,null,null).exports;e.default=(t={},e="product-card")=>{t.buyText&&(window.productCardBuyText=t.buyText),t.buy&&(window.productCardBuyHtml=t.buy),t.footer&&(window.productCardFooterHtml=t.footer);const r=window.storefront&&window.storefront.getScopedSlots,i=document.querySelectorAll("."+e),o=[];for(let t=0;t<i.length;t++)if(i[t]){const{productId:e,toRender:r}=i[t].dataset;r&&-1===o.indexOf(e)&&o.push(e)}let a;if(o.length>=6&&o.length<=70&&!t.skipSearchApi){const t=new c.a;a=t.setPageSize(o.length).setProductIds(o).fetch(!0,{timeout:5e3}).then(()=>{const e=t.getItems();for(let t=0;t<2;t++)u(i[t]);return e}).catch(t=>{console.error(t)})}else a=Promise.resolve();const u=i=>{if(i){const{productId:o,sku:s,toRender:c}=i.dataset;if(c){let c;a.then(t=>{Array.isArray(t)&&(c=t.find(({_id:t})=>t===o))}).finally(()=>{let a;if(c)a=!0;else{const t=i.parentNode;if(t&&(c=t.dataset.product,"string"==typeof c))try{c=JSON.parse(c)}catch(t){c=void 0}}((i,o,s,a,c)=>{new n.a({render:n=>n(v,{class:"product-card"!==e?e:null,attrs:{"data-product-id":o,"data-sku":s},props:{...t.props,productId:o,product:a,isLoaded:c,transitionClass:null},scopedSlots:"function"==typeof r?r(i,n):void 0})}).$mount(i)})(i,o,s,c,a)})}}};s()(i,{rootMargin:"350px 0px",threshold:0,load:u}).observe()}},function(t,e){t.exports=s},function(t,e,r){"use strict";r.d(e,"b",(function(){return i})),r.d(e,"a",(function(){return n})),r.d(e,"c",(function(){return o})),r.d(e,"d",(function(){return s})),r.d(e,"e",(function(){return a})),r.d(e,"f",(function(){return c})),r.d(e,"g",(function(){return u})),r.d(e,"h",(function(){return d})),r.d(e,"i",(function(){return l})),r.d(e,"j",(function(){return p})),r.d(e,"k",(function(){return f})),r.d(e,"l",(function(){return h})),r.d(e,"m",(function(){return _})),r.d(e,"n",(function(){return m})),r.d(e,"o",(function(){return b})),r.d(e,"p",(function(){return g})),r.d(e,"q",(function(){return v})),r.d(e,"r",(function(){return y})),r.d(e,"s",(function(){return x})),r.d(e,"t",(function(){return w})),r.d(e,"u",(function(){return O})),r.d(e,"v",(function(){return C})),r.d(e,"w",(function(){return j})),r.d(e,"x",(function(){return S})),r.d(e,"y",(function(){return k})),r.d(e,"z",(function(){return P})),r.d(e,"A",(function(){return I})),r.d(e,"B",(function(){return T})),r.d(e,"C",(function(){return z})),r.d(e,"D",(function(){return B})),r.d(e,"E",(function(){return L})),r.d(e,"F",(function(){return A})),r.d(e,"G",(function(){return $})),r.d(e,"H",(function(){return M})),r.d(e,"I",(function(){return N})),r.d(e,"J",(function(){return q})),r.d(e,"K",(function(){return D})),r.d(e,"L",(function(){return E})),r.d(e,"M",(function(){return R})),r.d(e,"N",(function(){return F})),r.d(e,"O",(function(){return H})),r.d(e,"P",(function(){return U})),r.d(e,"Q",(function(){return W})),r.d(e,"R",(function(){return V}));const i={en_us:"Add to cart",pt_br:"Adicionar ao carrinho"},n={en_us:"Add $1 to earn",pt_br:"Adicione $1 para ganhar"},o={en_us:"As of",pt_br:"A partir de"},s={en_us:"At sight",pt_br:"À vista"},a={en_us:"Buy",pt_br:"Comprar"},c={en_us:"Calculate shipping",pt_br:"Calcular frete"},u={en_us:"Close",pt_br:"Fechar"},d={en_us:"Connection error, click product to try again",pt_br:"Erro de conexão, clique no produto para tentar novamente"},l={en_us:"Days",pt_br:"Dias"},p={en_us:"Discount of",pt_br:"Desconto de"},f={en_us:"Email",pt_br:"E-mail"},h={en_us:"Free shipping",pt_br:"Frete grátis"},_={en_us:"Free shipping from",pt_br:"Frete grátis a partir de"},m={en_us:"From",pt_br:"De"},b={en_us:"Fullscreen",pt_br:"Tela cheia"},g={en_us:"Interest free",pt_br:"Sem juros"},v={en_us:"Unable to load product information, please check your internet connection.",pt_br:"Não foi possível carregar informações do produto, por favor verifique sua conexão."},y={en_us:"Next",pt_br:"Próximo"},x={en_us:"Of",pt_br:"De"},w={en_us:"Of discount",pt_br:"De desconto"},O={en_us:"On",pt_br:"No"},C={en_us:"On freight",pt_br:"No frete"},j={en_us:"Only",pt_br:"Apenas"},S={en_us:"Open gallery",pt_br:"Abrir galería"},k={en_us:"Out of stock",pt_br:"Sem estoque"},P={en_us:"Payment options",pt_br:"Opções de pagamento"},I={en_us:"Per unit",pt_br:"Por unidade"},T={en_us:"Previous",pt_br:"Anterior"},z={en_us:"Production deadline",pt_br:"Prazo de produção"},B={en_us:"Retry",pt_br:"Tentar novamente"},L={en_us:"See more info",pt_br:"Veja mais informações"},A={en_us:"Select",pt_br:"Selecionar"},$={en_us:"Select variation",pt_br:"Selecionar variação"},M={en_us:"Please select an option in each field above",pt_br:"Por favor selecione uma opção em cada campo acima"},N={en_us:"Share",pt_br:"Compartilhar"},q={en_us:"Share on Facebook",pt_br:"Compartilhar no Facebook"},D={en_us:"To",pt_br:"Por"},E={en_us:"Unavailable",pt_br:"Indisponível"},R={en_us:"Units",pt_br:"Unidades"},F={en_us:"Units in stock",pt_br:"Unidades em estoque"},H={en_us:"Up to",pt_br:"Até"},U={en_us:"Video",pt_br:"Vídeo"},W={en_us:"Working days",pt_br:"Dias úteis"},V={en_us:"Zip code",pt_br:"CEP"}}]).default}));
//# sourceMappingURL=widget-product-card.min.js.map