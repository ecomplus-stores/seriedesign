var widgetCompreConfie=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/assets/vendor/",r(r.s=2)}([function(e,t){e.exports=void 0},function(e,t){e.exports=void 0},function(e,t,r){"use strict";r.r(t);var n=r(0),o=r(1),a=r.n(o);t.default=(e={})=>{const{compreConfieStoreId:t}=e;if(t){const e=window.storefrontApp&&window.storefrontApp.router;if(e){const r=({name:e,params:r})=>{if("confirmation"===e&&r.json){let e;const o=decodeURIComponent(r.json);if(o)try{e=JSON.parse(o)}catch(e){}if(e){const r=a.a.getCustomer(),o=e.transactions&&e.transactions[0],i=o&&o.payer,c=Object(n.fullName)(r),d=new Date;let s=`orderSellerID=${t}&orderPlatform=ecomplus`+`&orderTotalSpent=${e.amount.total}`+`&orderDeliveryTax=${e.amount.freight||0}`+`&orderID=${e.number||e._id}`+`&consumerEmail=${r.main_email}`+`&billingEmail=${r.main_email}`+`&consumerName=${encodeURIComponent(c)}`+`&orderDate=${d.getDate()}/${d.getMonth()+1}/${d.getFullYear()} | `+`${d.getHours()}:${d.getMinutes()}:${d.getSeconds()}`;if("m"===r.gender?s+="&consumerGender=Masculino&billingGender=Masculino":"f"===r.gender&&(s+="&consumerGender=Feminino&billingGender=Feminino"),"p"===r.registry_type&&r.doc_number&&(s+=`&consumerCPF=${r.doc_number}`+`&billingCPF=${i&&i.doc_number||r.doc_number}`),r.birth_date){const{day:e,month:t,year:n}=r.birth_date;s+=`&consumerBirthDate=${e.toString().padStart(2,"0")}`+`/${t.toString().padStart(2,"0")}/${n}`}const{items:l}=e;if(l&&l.length){let e=l[0].sku,t=Object(n.price)(l[0]),r=l[0].quantity,o=encodeURIComponent(l[0].name),a="0";for(let i=1;i<l.length;i++)e+=`|${l[i].sku}`,t+=`|${Object(n.price)(l[i])}`,r+=`|${l[i].quantity}`,o+=`|${encodeURIComponent(l[i].name)}`,a+="|0";s+=`&productSKU=${e}&productValue=${t}&productQuantity=${r}`+`&ProductName=${o}&ProductMktSaleID=${a}`}if(e.shipping_lines&&e.shipping_lines[0]){const t=e.shipping_lines[0];if(t.app&&t.app.label)switch(s+="&orderDeliveryType=",t.app.label.toLowerCase()){case"pac":s+="0";break;case"sedex":s+="1";break;case"retirar na loja":s+="3";break;default:s+="4"}t.delivery_time&&t.delivery_time.days&&(s+=`&orderDeliveryTime=${t.delivery_time.days}`+`&productDeliveryTime=${t.delivery_time.days}`),s+=`&consumerZipcode=${t.to.zip}`+`&billingZipcode=${t.to.zip}`}if(o){switch(o.app&&o.app.intermediator&&o.app.intermediator.name&&(s+=`&orderPartnerPayment=${o.app.intermediator.name}`),s+=`&billingName=${encodeURIComponent(i&&i.fullname||c)}`,s+=`&orderParcels=${o.installments&&o.installments.number||1}`,s+="&orderPaymentType=",o.payment_method.code){case"credit_card":s+="1";break;case"banking_billet":s+="2";break;case"debit_card":case"online_debit":s+="9";break;case"account_deposit":s+="6";break;case"loyalty_points":s+="8";break;default:s+="3"}if(o.credit_card&&o.credit_card.company)switch(s+="&orderCardFlag=",o.credit_card.company.toLowerCase()){case"visa":s+=3;break;case"mastercard":s+=2;break;case"american express":case"amex":s+=5;break;case"elo":s+=8;break;case"aura":s+=7;break;case"hipercard":s+=6;break;case"diners club":s+=1;break;default:s+=9}}const u=setInterval(()=>{const e=document.getElementById("confirmation");if(e){e.insertAdjacentHTML("beforeend",`<a id="bannerEconfy"></a> <param id="TagEConfy" value="${s}">`);const r=document.createElement("script");r.id="getData",r.type="text/javascript",r.src="https://banner.compreconfie.com.br/scripts/tagBanner.min.js"+`?${t}&lightbox=true`,document.body.appendChild(r),clearInterval(u)}},200)}}};e.currentRoute&&r(e.currentRoute),e.afterEach(r)}}else console.error(new Error("Can't show lightbox without `compreConfieStoreId` option"))}}]).default;
//# sourceMappingURL=widget-compre-confie.var.min.js.map